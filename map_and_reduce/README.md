# 非同期サーバー・asyncio・シングルスレッドに関する学び

## 非同期サーバーとは？
- **非同期サーバー**は、1つのスレッドで複数のクライアント（ワーカー）からの接続やI/Oを効率的に処理する仕組み。
- Pythonでは`asyncio`モジュールを使うことで、ノンブロッキングI/Oを実現できる。
- **マルチスレッド**とは異なり、スレッドを増やさずに多くの接続を同時に扱える。

## asyncioの特徴
- **シングルスレッド**で動作するイベントループベースのフレームワーク。
- `async def`や`await`を使って、I/O待ちの間に他のタスクを進める。
- `threading`モジュールを使わず、スレッドを明示的に作成しない。
- 数千の接続を1スレッドで効率的に管理できる。

## run_until_completeの意味
- `run_until_complete(コルーチン)`は、指定した非同期処理（コルーチン）が完了するまでイベントループを回し続ける。
- サーバーの場合は「ソケットがリッスン状態になり、接続を受け付けられる状態になる」まで。
- ワーカーの場合は「サーバーへの接続が完了する」まで。

## run_foreverの意味
- イベントループを永久に回し続ける。
- 新しい接続やデータ受信などのイベントを待ち続ける。
- サーバーやワーカーが終了するまでプログラムが動き続ける。

## 非同期サーバーの利点
- スレッドのオーバーヘッドがないため、メモリ効率が良い。
- コンテキストスイッチのコストがない。
- シングルスレッドなのでデバッグがしやすい。
- I/Oバウンドな大量のクライアントを効率的にさばける。

## まとめ
- Pythonの`asyncio`を使ったサーバーは**シングルスレッド・非同期**で動作する。
- `run_until_complete`は「サーバー起動」や「接続完了」まで待つためのもの。
- `run_forever`はイベントループを永久に回し続ける。
- スレッドを使わずに多くのクライアントを効率的に処理できるのが最大の特徴。 